<!DOCTYPE html>
<html>
<head>
  <title>Google Maps App Clone</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }
    #map {
      height: 100%;
      width: 100%;
    }
    .floating-ui {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      background: white;
      padding: 10px;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
    }
    #autocomplete {
      padding: 8px;
      width: 300px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    #map-type, #route-btn {
      padding: 8px;
      border-radius: 8px;
      border: none;
      background: #4285F4;
      color: white;
      cursor: pointer;
    }
    #directions-panel {
      position: absolute;
      bottom: 10px;
      left: 10px;
      width: 300px;
      max-height: 300px;
      overflow-y: auto;
      background: white;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      z-index: 10;
    }
  </style>
</head>
<body>

<div class="floating-ui">
  <input id="autocomplete" type="text" placeholder="Search location..." />
  <button onclick="centerOnUser()">📍</button>
  <button onclick="toggleTraffic()">🚦</button>
  <button onclick="toggleTransit()">🚉</button>
  <button onclick="toggleBicycle()">🚴</button>
  <select id="map-type" onchange="changeMapType()">
    <option value="roadmap">Map</option>
    <option value="satellite">Satellite</option>
    <option value="hybrid">Hybrid</option>
    <option value="terrain">Terrain</option>
  </select>
  <button id="route-btn" onclick="showRoute()">🧭 Route</button>
</div>

<div id="directions-panel"></div>
<div id="map"></div>

<script>
  let map, marker, directionsService, directionsRenderer;
  let trafficLayer, transitLayer, bikeLayer;

  function initMap() {
    const india = { lat: 20.5937, lng: 78.9629 };
    map = new google.maps.Map(document.getElementById("map"), {
      center: india,
      zoom: 5,
      mapTypeControl: false,
      fullscreenControl: true,
      zoomControl: true,
      streetViewControl: false,
    });

    directionsService = new google.maps.DirectionsService();
    directionsRenderer = new google.maps.DirectionsRenderer({
      panel: document.getElementById("directions-panel")
    });
    directionsRenderer.setMap(map);

    marker = new google.maps.Marker({ map, draggable: true });

    // Layers
    trafficLayer = new google.maps.TrafficLayer();
    transitLayer = new google.maps.TransitLayer();
    bikeLayer = new google.maps.BicyclingLayer();

    // Autocomplete
    const input = document.getElementById("autocomplete");
    const autocomplete = new google.maps.places.Autocomplete(input);
    autocomplete.bindTo("bounds", map);

    autocomplete.addListener("place_changed", () => {
      const place = autocomplete.getPlace();
      if (!place.geometry) return;
      map.setCenter(place.geometry.location);
      map.setZoom(17);
      marker.setPosition(place.geometry.location);
      marker.setVisible(true);
    });

    map.addListener("click", (e) => {
      marker.setPosition(e.latLng);
      marker.setVisible(true);
    });

    centerOnUser();
  }

  function centerOnUser() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const coords = {
            lat: pos.coords.latitude,
            lng: pos.coords.longitude
          };
          map.setCenter(coords);
          map.setZoom(14);
          marker.setPosition(coords);
          marker.setVisible(true);
        },
        (err) => {
          alert("Geolocation failed: " + err.message);
        }
      );
    } else {
      alert("Geolocation is not supported by your browser.");
    }
  }

  function changeMapType() {
    const type = document.getElementById("map-type").value;
    map.setMapTypeId(type);
  }

  function toggleTraffic() {
    trafficLayer.setMap(trafficLayer.getMap() ? null : map);
  }

  function toggleTransit() {
    transitLayer.setMap(transitLayer.getMap() ? null : map);
  }

  function toggleBicycle() {
    bikeLayer.setMap(bikeLayer.getMap() ? null : map);
  }

  function showRoute() {
    const origin = marker.getPosition();
    const destination = { lat: 28.6139, lng: 77.2090 }; // Delhi

    directionsService.route(
      {
        origin: origin,
        destination: destination,
        travelMode: google.maps.TravelMode.DRIVING,
      },
      (result, status) => {
        if (status === "OK") {
          directionsRenderer.setDirections(result);
        } else {
          alert("Directions request failed due to " + status);
        }
      }
    );
  }
</script>

<!-- Load Google Maps JavaScript API -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDwN_M-MaYVOpnWUEMQd6pXvjjgI0G5L8Y&libraries=places&callback=initMap" async defer></script>

</body>
</html>
